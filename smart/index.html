<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>昆曲</title>
	<meta name="viewport" content="width=device-width,height=device-height,maximum-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
   	<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<div class="bg1">
		<div class="le">
			
		</div>
		<img src="L/p1待机循环.gif" alt="" id="bg1">
		<div class="f1">
			<div class="f2">	
			</div>
			<div class="f3">
			</div>
			<div class="f4">
			</div>
		</div>
		<div class="xiajian" id="xiajian1">	
			<div class="jian">
			</div>
		</div>
	</div>
	<div class="bg2">
		<img src="L/p1转p2输出.gif" alt="" id="bg2">
	</div>
	<div class="bg3">
		<div class="le1">
			
		</div>
		<img src="L/p2待机循环.gif" alt="" id="bg3">
		<div class="xiajian" id="xiajian2">	
			<div class="jian">
			</div>
		</div>
	</div>
	<div class="bg4">
		<div class="le1">
			
		</div>
		<img src="L/p3-4循环.gif" alt="" id="bg4">
		<div class="f11" id="xiajian3">
			<div class="f22">	
			</div>
			<div class="f33">
			</div>
			<div class="f44">
			</div>
		</div>
	</div>
	<div class="bg5">
		<img src="L/p3-4转场输出.gif" alt="" id="bg5">
	</div>
	<div class="bg6">
		<img src="L/p5待机循环.gif" alt="" id="bg6">
		<div class="f12" id="xiajian4">
			<div class="f22">	
			</div>
			<div class="f33">
			</div>
			<div class="f44">
			</div>
		</div>
	</div>
	<div class="bg7">
		<div class="le1">
			
		</div>
		<img src="L/p6循环.gif" alt="" id="bg7">
		<div class="xiajian" id="xiajian5">	
			<div class="jian">
			</div>
		</div>
	</div>
	<!-- <script src="js/font.js"></script> -->
	<script src="js/jquery.min.js"></script>
	<script src="js/zepto.min.js"></script>
	<script src="js/touch.min.js"></script>
	<script src="js/loading.js"></script>
	<script>
	$(function(){
		imgLoader(['L/p1待机循环.gif','L/p1转p2输出.gif'], function(percentage){    
		console.log(percentage)    
		});   
		if ('getContext' in document.createElement('canvas')) {
	    HTMLImageElement.prototype.play = function() {
	        if (this.storeCanvas) {
	            // 移除存储的canvas
	            this.storeCanvas.parentElement.removeChild(this.storeCanvas);
	            this.storeCanvas = null;
	            // 透明度还原
	            image.style.opacity = '';
	        }
	        if (this.storeUrl) {
	            this.src = this.storeUrl;    
	        }
	    };
	    HTMLImageElement.prototype.stop = function() {
	        var canvas = document.createElement('canvas');
	        // 尺寸
	        var width = this.width, height = this.height;
	        if (width && height) {
	            // 存储之前的地址
	            if (!this.storeUrl) {
	                this.storeUrl = this.src;
	            }
	            // canvas大小
	            canvas.width = width;
	            canvas.height = height;
	            // 绘制图片帧（第一帧）
	            canvas.getContext('2d').drawImage(this, 0, 0, width, height);
	            // 重置当前图片
	            try {
	                this.src = canvas.toDataURL("image/gif");
	            } catch(e) {
	                // 跨域
	                this.removeAttribute('src');
	                // 载入canvas元素
	                canvas.style.position = 'absolute';
	                // 前面插入图片
	                this.parentElement.insertBefore(canvas, this);
	                // 隐藏原图
	                this.style.opacity = '0';
	                // 存储canvas
	                this.storeCanvas = canvas;
	            }
	        }
	    };
	}
		
		$('#xiajian1').click(function(){
			$('.bg1').css('display','none');
			$('.bg2').css('display','block');
			setTimeout(function(){
				$('.bg2').css('display','none');
				$('.bg3').css('display','block');
				// $('#bg2').attr('src','L/p2待机循环.gif')
			},5800)
			imgLoader(['L/p2待机循环.gif','L/p3-4循环.gif'], function(percentage){    
			console.log(percentage)    
			});  

		});
		$('#xiajian2').click(function(){
			$('.bg3').css('display','none');
			$('.bg4').css('display','block');
		});
		$('#xiajian3').click(function(){
			$('.bg4').css('display','none');
			$('.bg5').css('display','block');
			setTimeout(function(){
				$('.bg5').css('display','none');
				$('.bg6').css('display','block');
				// $('#bg2').attr('src','L/p2待机循环.gif')
			},5800)

		});
		$('#xiajian4').click(function(){
			$('.bg6').css('display','none');
			$('.bg7').css('display','block');

		});
	})
	</script>
</body>
</html>